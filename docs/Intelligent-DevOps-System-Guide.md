# æ™ºèƒ½åŒ–DevOpsç³»ç»Ÿå®Œæ•´æŒ‡å—

> åŸºäºMCPå·¥å…·é›†çš„ä¸‹ä¸€ä»£ä»£ç è´¨é‡æ£€æŸ¥å’ŒGitæäº¤è‡ªåŠ¨åŒ–ç³»ç»Ÿ

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [æ ¸å¿ƒåŠŸèƒ½](#æ ¸å¿ƒåŠŸèƒ½)
- [MCPå·¥å…·é›†æˆ](#mcpå·¥å…·é›†æˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†ä½¿ç”¨æŒ‡å—](#è¯¦ç»†ä½¿ç”¨æŒ‡å—)
- [é…ç½®ç®¡ç†](#é…ç½®ç®¡ç†)
- [ç›‘æ§å’Œæ—¥å¿—](#ç›‘æ§å’Œæ—¥å¿—)
- [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æ‰©å±•å¼€å‘](#æ‰©å±•å¼€å‘)

---

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

æœ¬æ™ºèƒ½åŒ–DevOpsç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº**MCP (Model Context Protocol)** å·¥å…·é›†çš„ä¸‹ä¸€ä»£ä»£ç è´¨é‡æ£€æŸ¥å’ŒGitæäº¤è‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆã€‚ç³»ç»Ÿé›†æˆäº†ä¸‰ä¸ªæ ¸å¿ƒMCPå·¥å…·ï¼š

- **context7**: è·å–æœ€ä½³å®è·µå’ŒæŠ€æœ¯æ–‡æ¡£
- **memory**: è®°ä½æ„å»ºæ¨¡å¼å’Œå¤±è´¥åŸå› 
- **sequential-thinking**: ä¼˜åŒ–å†³ç­–æµç¨‹å’Œæ‰§è¡Œé¡ºåº

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
æ™ºèƒ½åŒ–DevOpsç³»ç»Ÿ
â”œâ”€â”€ é˜¶æ®µ1: ä»£ç è´¨é‡æ£€æŸ¥ç³»ç»Ÿå¢å¼º
â”‚   â”œâ”€â”€ æ™ºèƒ½è´¨é‡æ£€æŸ¥å™¨ (smart-check-all.mjs)
â”‚   â”œâ”€â”€ å˜æ›´æ„ŸçŸ¥ç­–ç•¥
â”‚   â””â”€â”€ è´¨é‡é—¨ç¦æœºåˆ¶
â”œâ”€â”€ é˜¶æ®µ2: æ™ºèƒ½Gitæäº¤å·¥ä½œæµä¼˜åŒ–
â”‚   â”œâ”€â”€ æ™ºèƒ½æäº¤ç”Ÿæˆå™¨ (smart-commit.mjs)
â”‚   â”œâ”€â”€ å†²çªæ£€æµ‹åŠ©æ‰‹
â”‚   â””â”€â”€ å­¦ä¹ å‹æäº¤ä¼˜åŒ–
â”œâ”€â”€ é˜¶æ®µ3: CI/CDæµæ°´çº¿é›†æˆ
â”‚   â”œâ”€â”€ æ™ºèƒ½CIå·¥ä½œæµ (smart-ci.yml)
â”‚   â”œâ”€â”€ æ™ºèƒ½éƒ¨ç½²å·¥ä½œæµ (smart-deploy.yml)
â”‚   â””â”€â”€ MCPé©±åŠ¨ä¼˜åŒ–
â””â”€â”€ é˜¶æ®µ4: å¤šç¯å¢ƒéƒ¨ç½²æ”¯æŒ
    â”œâ”€â”€ ç¯å¢ƒé…ç½®ç®¡ç† (environment-manager.mjs)
    â”œâ”€â”€ æ™ºèƒ½ç›‘æ§ç³»ç»Ÿ (smart-monitoring.mjs)
    â””â”€â”€ ä¼ä¸šçº§éƒ¨ç½²ç­–ç•¥
```

---

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### ğŸ” æ™ºèƒ½ä»£ç è´¨é‡æ£€æŸ¥

**ç‰¹æ€§**:
- å˜æ›´æ„ŸçŸ¥çš„æ£€æŸ¥ç­–ç•¥
- MCPé©±åŠ¨çš„æœ€ä½³å®è·µåº”ç”¨
- åŠ¨æ€è´¨é‡é—¨ç¦è°ƒæ•´
- å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- å­¦ä¹ å‹æ£€æŸ¥ç»“æœåˆ†æ

**ä½¿ç”¨æ–¹å¼**:
```bash
# å¯ç”¨MCPçš„æ™ºèƒ½æ£€æŸ¥
pnpm run smart-check:all

# ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥
pnpm run smart-check:strict
```

### ğŸš€ æ™ºèƒ½Gitæäº¤

**ç‰¹æ€§**:
- Conventional Commitsæ™ºèƒ½ç”Ÿæˆ
- æ–‡ä»¶å˜æ›´åˆ†æ
- å†²çªé¢„æµ‹å’Œè§£å†³å»ºè®®
- æäº¤ä¿¡æ¯å­¦ä¹ ä¼˜åŒ–
- è‡ªåŠ¨åŒ–æäº¤æµç¨‹

**ä½¿ç”¨æ–¹å¼**:
```bash
# æ™ºèƒ½æäº¤
pnpm run smart-push

# ä¸¥æ ¼æ¨¡å¼æäº¤
pnpm run smart-push:strict
```

### ğŸ”„ æ™ºèƒ½CI/CDæµæ°´çº¿

**ç‰¹æ€§**:
- å˜æ›´æ„ŸçŸ¥çš„jobè°ƒåº¦
- MCPç­–ç•¥è§„åˆ’
- é›¶åœæœºéƒ¨ç½²
- å¤šç¯å¢ƒæ”¯æŒ
- æ™ºèƒ½å›æ»šæœºåˆ¶

**ä½¿ç”¨æ–¹å¼**:
```bash
# æ™ºèƒ½CIæ£€æŸ¥
pnpm run smart-ci

# æ™ºèƒ½éƒ¨ç½²
pnpm run smart-deploy

# å®Œæ•´CI/CDæµç¨‹
pnpm run smart:ci-deploy
```

### ğŸŒ å¤šç¯å¢ƒé…ç½®ç®¡ç†

**ç‰¹æ€§**:
- æ™ºèƒ½é…ç½®ç”Ÿæˆ
- ç¯å¢ƒé…ç½®åŒæ­¥
- é…ç½®éªŒè¯å’Œä¸€è‡´æ€§æ£€æŸ¥
- å®‰å…¨å¯†é’¥ç®¡ç†
- MCPé…ç½®ä¼˜åŒ–

**ä½¿ç”¨æ–¹å¼**:
```bash
# ç”Ÿæˆç¯å¢ƒé…ç½®
pnpm run env:generate production

# åŒæ­¥é…ç½®
pnpm run env:sync staging production

# é…ç½®å¥åº·æ£€æŸ¥
pnpm run env:health

# é…ç½®éªŒè¯
pnpm run env:validate
```

### ğŸ“Š æ™ºèƒ½ç›‘æ§å’Œæ—¥å¿—

**ç‰¹æ€§**:
- è‡ªåŠ¨åŒ–ç›‘æ§é…ç½®
- å¼‚å¸¸æ£€æµ‹å’Œæ ¹å› åˆ†æ
- MCPé©±åŠ¨çš„å¼‚å¸¸åˆ†æ
- å¤šç»´åº¦å¥åº·æ£€æŸ¥
- æ™ºèƒ½å‘Šè­¦ç­–ç•¥

**ä½¿ç”¨æ–¹å¼**:
```bash
# åˆå§‹åŒ–ç›‘æ§ç³»ç»Ÿ
pnpm run monitor:init production

# å¥åº·æ£€æŸ¥
pnpm run monitor:health staging

# å¼‚å¸¸æ£€æµ‹
pnpm run monitor:detect production 1h
```

---

## ğŸ§  MCPå·¥å…·é›†æˆ

### Context7 é›†æˆ

**ç”¨é€”**: è·å–æœ€æ–°çš„æœ€ä½³å®è·µã€æŠ€æœ¯æ–‡æ¡£å’Œé…ç½®å»ºè®®

**é›†æˆç‚¹**:
- ä»£ç è´¨é‡æ£€æŸ¥æœ€ä½³å®è·µ
- éƒ¨ç½²ç­–ç•¥ä¼˜åŒ–å»ºè®®
- ç›‘æ§é…ç½®æ ‡å‡†
- å®‰å…¨é…ç½®å»ºè®®

**å¯ç”¨æ–¹å¼**:
```bash
ENABLE_MCP=1 pnpm run smart-check:all
```

### Memory é›†æˆ

**ç”¨é€”**: è®°ä½å†å²æ¨¡å¼ã€å¤±è´¥åŸå› å’Œä¼˜åŒ–ç­–ç•¥

**é›†æˆç‚¹**:
- æ„å»ºå¤±è´¥æ¨¡å¼å­¦ä¹ 
- é…ç½®å˜æ›´æ¨¡å¼è®°å½•
- å¼‚å¸¸æ¨¡å¼è®°å¿†
- æäº¤ä¿¡æ¯å­¦ä¹ 

**å­¦ä¹ å†…å®¹**:
- æ„å»ºæˆåŠŸ/å¤±è´¥æ¨¡å¼
- é…ç½®å˜æ›´å½±å“
- å¼‚å¸¸å‘ç”Ÿè§„å¾‹
- ç”¨æˆ·æäº¤åå¥½

### Sequential-thinking é›†æˆ

**ç”¨é€”**: ä¼˜åŒ–å†³ç­–æµç¨‹ã€æ‰§è¡Œé¡ºåºå’Œç­–ç•¥é€‰æ‹©

**é›†æˆç‚¹**:
- æ£€æŸ¥æ­¥éª¤ä¼˜åŒ–
- éƒ¨ç½²ç­–ç•¥å†³ç­–
- å¼‚å¸¸æ ¹å› åˆ†æ
- é…ç½®ä¼˜åŒ–å»ºè®®

**å†³ç­–æµç¨‹**:
- åˆ†æå½“å‰çŠ¶æ€
- è¯„ä¼°å¯é€‰æ–¹æ¡ˆ
- é€‰æ‹©æœ€ä¼˜ç­–ç•¥
- æ‰§è¡Œå¹¶åé¦ˆ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç³»ç»Ÿè¦æ±‚

- Node.js 18+
- pnpm 10+
- Git 2.30+
- å¯é€‰: MCPå·¥å…·è®¿é—®æƒé™

### 2. å®‰è£…ä¾èµ–

```bash
pnpm install
```

### 3. åŸºç¡€é…ç½®

åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶ï¼š
```bash
# ç”Ÿæˆå¼€å‘ç¯å¢ƒé…ç½®
pnpm run env:generate development

# ç”Ÿæˆç”Ÿäº§ç¯å¢ƒé…ç½®
pnpm run env:generate production
```

### 4. ç¬¬ä¸€æ¬¡æ™ºèƒ½æ£€æŸ¥

```bash
# å¯ç”¨MCPçš„æ™ºèƒ½æ£€æŸ¥
ENABLE_MCP=1 pnpm run smart-check:all
```

### 5. ç¬¬ä¸€æ¬¡æ™ºèƒ½æäº¤

```bash
# æ™ºèƒ½æäº¤
ENABLE_MCP=1 pnpm run smart-push
```

### 6. åˆå§‹åŒ–ç›‘æ§

```bash
# åˆå§‹åŒ–ç›‘æ§ç³»ç»Ÿ
pnpm run monitor:init production
```

---

## ğŸ“– è¯¦ç»†ä½¿ç”¨æŒ‡å—

### æ™ºèƒ½ä»£ç è´¨é‡æ£€æŸ¥

#### åŸºç¡€ç”¨æ³•

```bash
# æ ‡å‡†æ™ºèƒ½æ£€æŸ¥
pnpm run smart-check:all

# ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥
pnpm run smart-check:strict

# ä»…ä»£ç æ£€æŸ¥ï¼ˆæ— MCPï¼‰
pnpm run check:all
```

#### MCPå¢å¼ºåŠŸèƒ½

å¯ç”¨MCPåï¼Œç³»ç»Ÿå°†æä¾›ä»¥ä¸‹å¢å¼ºåŠŸèƒ½ï¼š

1. **æ™ºèƒ½ç­–ç•¥é€‰æ‹©**: åŸºäºæ–‡ä»¶å˜æ›´è‡ªåŠ¨é€‰æ‹©æ£€æŸ¥ç­–ç•¥
2. **æœ€ä½³å®è·µåº”ç”¨**: ä»context7è·å–æœ€æ–°çš„å·¥å…·é…ç½®
3. **å¤±è´¥æ¨¡å¼å­¦ä¹ **: ä»å†å²æ„å»ºä¸­å­¦ä¹ é¿å…é‡å¤é”™è¯¯
4. **æ‰§è¡Œé¡ºåºä¼˜åŒ–**: ä½¿ç”¨sequential-thinkingä¼˜åŒ–æ£€æŸ¥é¡ºåº

#### æ£€æŸ¥ç­–ç•¥

ç³»ç»Ÿæ ¹æ®å˜æ›´ç±»å‹è‡ªåŠ¨é€‰æ‹©ç­–ç•¥ï¼š

| å˜æ›´ç±»å‹ | ç­–ç•¥ | æ£€æŸ¥é¡¹ç›® | å¹¶è¡Œåº¦ |
|---------|------|----------|--------|
| æ–‡æ¡£å˜æ›´ | Basic | æ–‡æ¡£æ£€æŸ¥ã€é“¾æ¥æ£€æŸ¥ | ä½ |
| ä»£ç å˜æ›´ | Standard | ä»£ç æ£€æŸ¥ã€ç±»å‹æ£€æŸ¥ã€æµ‹è¯• | ä¸­ |
| é…ç½®å˜æ›´ | Strict | å…¨é‡æ£€æŸ¥ã€å®‰å…¨æ£€æŸ¥ | é«˜ |

### æ™ºèƒ½Gitæäº¤

#### Conventional Commitsæ™ºèƒ½ç”Ÿæˆ

ç³»ç»Ÿåˆ†ææ–‡ä»¶å˜æ›´è‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯ï¼š

```bash
# åˆ†æå˜æ›´å¹¶ç”Ÿæˆæäº¤
pnpm run smart-push
```

**ç”Ÿæˆçš„æäº¤ç¤ºä¾‹**:
```
feat(auth): add Google OAuth integration

- Implement OAuth2 flow with Google
- Add user session management
- Update authentication middleware
- Add redirect handling for OAuth callback

Closes #123
```

#### å†²çªæ£€æµ‹å’Œè§£å†³

ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹æ½œåœ¨å†²çªå¹¶æä¾›è§£å†³å»ºè®®ï¼š

```bash
# æ£€æµ‹å†²çªï¼ˆåŒ…å«åœ¨smart-pushä¸­ï¼‰
pnpm run smart-push
```

**å†²çªè§£å†³å»ºè®®**:
- æ–‡ä»¶åˆå¹¶ç­–ç•¥å»ºè®®
- APIå…¼å®¹æ€§æ£€æŸ¥
- é…ç½®å†²çªè§£å†³æ–¹æ¡ˆ
- ä¾èµ–å…³ç³»æ£€æŸ¥

### æ™ºèƒ½CI/CDæµæ°´çº¿

#### GitHub Actionså·¥ä½œæµ

ç³»ç»Ÿæä¾›ä¸¤ä¸ªä¸»è¦å·¥ä½œæµï¼š

**smart-ci.yml**: æ™ºèƒ½CIæ£€æŸ¥
- å˜æ›´æ„ŸçŸ¥åˆ†æ
- MCPç­–ç•¥è§„åˆ’
- æ™ºèƒ½å¹¶è¡Œæ‰§è¡Œ
- å­¦ä¹ æŠ¥å‘Šç”Ÿæˆ

**smart-deploy.yml**: æ™ºèƒ½éƒ¨ç½²
- éƒ¨ç½²ç­–ç•¥æ™ºèƒ½é€‰æ‹©
- é›¶åœæœºéƒ¨ç½²
- å¥åº·ç›‘æ§é›†æˆ
- è‡ªåŠ¨å›æ»šæœºåˆ¶

#### è§¦å‘æ–¹å¼

```bash
# æ‰‹åŠ¨è§¦å‘æ™ºèƒ½CI
ENABLE_MCP=1 pnpm run smart-ci

# æ‰‹åŠ¨è§¦å‘æ™ºèƒ½éƒ¨ç½²
ENABLE_MCP=1 pnpm run smart-deploy
```

**å‚æ•°æ”¯æŒ**:
```bash
# æŒ‡å®šç¯å¢ƒå’Œç­–ç•¥
inputs:
  environment: 'production'
  deployment_strategy: 'blue-green'
  mcp_optimization: true
  zero_downtime: true
```

### ç¯å¢ƒé…ç½®ç®¡ç†

#### é…ç½®æ–‡ä»¶ç»“æ„

```
config/environments/
â”œâ”€â”€ base.json          # åŸºç¡€é…ç½®
â”œâ”€â”€ development.json   # å¼€å‘ç¯å¢ƒé…ç½®
â”œâ”€â”€ staging.json      # é¢„å‘å¸ƒç¯å¢ƒé…ç½®
â””â”€â”€ production.json   # ç”Ÿäº§ç¯å¢ƒé…ç½®
```

#### é…ç½®ç”Ÿæˆ

```bash
# ç”ŸæˆæŒ‡å®šç¯å¢ƒé…ç½®
pnpm run env:generate <environment>

# ç¤ºä¾‹
pnpm run env:generate production
```

**ç”Ÿæˆå†…å®¹**:
- ç¯å¢ƒå˜é‡æ–‡ä»¶ (`.env.<environment>`)
- Cloudflareé…ç½® (`wrangler.<environment>.toml`)
- é…ç½®éªŒè¯æŠ¥å‘Š
- MCPä¼˜åŒ–å»ºè®®

#### é…ç½®åŒæ­¥

```bash
# åŒæ­¥é…ç½®åˆ°å…¶ä»–ç¯å¢ƒ
pnpm run env:sync <from> <to>

# ç¤ºä¾‹ï¼šä»stagingåŒæ­¥åˆ°production
pnpm run env:sync staging production
```

**åŒæ­¥ç‰¹æ€§**:
- æ™ºèƒ½åˆå¹¶ç­–ç•¥
- æ•æ„Ÿä¿¡æ¯ä¿æŠ¤
- é…ç½®ä¸€è‡´æ€§æ£€æŸ¥
- å†²çªè‡ªåŠ¨è§£å†³

### æ™ºèƒ½ç›‘æ§å’Œæ—¥å¿—

#### ç›‘æ§ç³»ç»Ÿåˆå§‹åŒ–

```bash
# åˆå§‹åŒ–æŒ‡å®šç¯å¢ƒç›‘æ§
pnpm run monitor:init <environment>

# ç¤ºä¾‹
pnpm run monitor:init production
```

**åˆå§‹åŒ–å†…å®¹**:
- ç›‘æ§é…ç½®ç”Ÿæˆ
- æ—¥å¿—é…ç½®è®¾ç½®
- å‘Šè­¦è§„åˆ™é…ç½®
- ä»ªè¡¨æ¿è®¾ç½®

#### å¥åº·æ£€æŸ¥

```bash
# æ‰§è¡Œå¥åº·æ£€æŸ¥
pnpm run monitor:health <environment>
```

**æ£€æŸ¥é¡¹ç›®**:
- æœåŠ¡å¯ç”¨æ€§
- èµ„æºä½¿ç”¨æƒ…å†µ
- å¤–éƒ¨ä¾èµ–çŠ¶æ€
- ç³»ç»Ÿæ•´ä½“å¥åº·åº¦

#### å¼‚å¸¸æ£€æµ‹

```bash
# æ£€æµ‹å¼‚å¸¸ï¼ˆæ—¶é—´èŒƒå›´å¯é€‰ï¼‰
pnpm run monitor:detect <environment> <time_range>

# ç¤ºä¾‹ï¼šæ£€æµ‹ç”Ÿäº§ç¯å¢ƒæœ€è¿‘1å°æ—¶å¼‚å¸¸
pnpm run monitor:detect production 1h
```

**å¼‚å¸¸åˆ†æ**:
- å¼‚å¸¸è‡ªåŠ¨åˆ†ç±»
- æ ¹å› åˆ†æ
- å½±å“è¯„ä¼°
- ä¿®å¤å»ºè®®

---

## âš™ï¸ é…ç½®ç®¡ç†

### ç¯å¢ƒé…ç½®

#### åŸºç¡€é…ç½® (base.json)

```json
{
  "database": {
    "type": "postgresql",
    "pool_size": 5,
    "timeout": "15s"
  },
  "security": {
    "encryption_algorithm": "AES-128-GCM",
    "session_timeout": "15m"
  },
  "performance": {
    "cache_ttl": "30m",
    "compression_enabled": true
  }
}
```

#### ç¯å¢ƒç‰¹å®šè¦†ç›–

æ¯ä¸ªç¯å¢ƒå¯ä»¥è¦†ç›–åŸºç¡€é…ç½®ï¼š

```json
{
  "database": {
    "host": "${DATABASE_HOST}",
    "ssl_enabled": true,
    "pool_size": 20
  },
  "security": {
    "debug_enabled": false,
    "session_timeout": "30m"
  }
}
```

### MCPé…ç½®

#### å¯ç”¨MCP

```bash
# ç¯å¢ƒå˜é‡æ–¹å¼
export ENABLE_MCP=1

# å‘½ä»¤è¡Œæ–¹å¼
ENABLE_MCP=1 pnpm run smart-check:all
```

#### MCPé…ç½®é€‰é¡¹

```bash
# ä¸¥æ ¼æ¨¡å¼
export STRICT_MODE=1

# è‡ªåŠ¨æäº¤
export AUTO_COMMIT=1

# è·³è¿‡è´¨é‡æ£€æŸ¥
export SKIP_QUALITY_CHECK=1
```

### è´¨é‡é—¨ç¦é…ç½®

ç³»ç»Ÿæ”¯æŒå¤šå±‚è´¨é‡é—¨ç¦ï¼š

#### Basic é—¨ç¦
- ä»£ç é£æ ¼æ£€æŸ¥
- åŸºç¡€ç±»å‹æ£€æŸ¥
- æ–‡æ¡£ä¸€è‡´æ€§

#### Standard é—¨ç¦
- ä¸¥æ ¼ä»£ç æ£€æŸ¥
- æµ‹è¯•è¦†ç›–ç‡æ£€æŸ¥
- æ„å»ºéªŒè¯

#### Strict é—¨ç¦
- å…¨é‡å®‰å…¨æ£€æŸ¥
- æ€§èƒ½åˆ†æ
- ä¾èµ–æ¼æ´æ‰«æ

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### ç›‘æ§æŒ‡æ ‡

#### æ ¸å¿ƒæŒ‡æ ‡

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | é˜ˆå€¼ | è¯´æ˜ |
|---------|----------|------|------|
| æ€§èƒ½ | response_time_p95 | 2000ms | 95%å“åº”æ—¶é—´ |
| æ€§èƒ½ | throughput | 1000/min | æ¯åˆ†é’Ÿè¯·æ±‚æ•° |
| å¯ç”¨æ€§ | error_rate | 1% | é”™è¯¯ç‡ |
| èµ„æº | cpu_usage | 80% | CPUä½¿ç”¨ç‡ |
| èµ„æº | memory_usage | 85% | å†…å­˜ä½¿ç”¨ç‡ |

#### è‡ªå®šä¹‰æŒ‡æ ‡

ç³»ç»Ÿæ”¯æŒæ ¹æ®ç¯å¢ƒå’Œä¸šåŠ¡éœ€æ±‚è‡ªå®šä¹‰æŒ‡æ ‡ï¼š

```javascript
// è‡ªå®šä¹‰æŒ‡æ ‡é…ç½®
{
  "custom_metrics": {
    "business_conversion_rate": {
      "threshold": 0.05,
      "severity": "warning"
    },
    "user_satisfaction_score": {
      "threshold": 4.0,
      "severity": "critical"
    }
  }
}
```

### æ—¥å¿—ç®¡ç†

#### æ—¥å¿—çº§åˆ«

- **Development**: debug - è¯¦ç»†è°ƒè¯•ä¿¡æ¯
- **Staging**: info - ä¸€èˆ¬ä¿¡æ¯æ—¥å¿—
- **Production**: warn - ä»…è­¦å‘Šå’Œé”™è¯¯

#### ç»“æ„åŒ–æ—¥å¿—

ç³»ç»Ÿæ”¯æŒJSONæ ¼å¼çš„ç»“æ„åŒ–æ—¥å¿—ï¼š

```json
{
  "timestamp": "2025-10-16T12:00:00Z",
  "level": "info",
  "message": "User login successful",
  "request_id": "req_123456",
  "user_id": "user_789",
  "service": "auth",
  "environment": "production"
}
```

### å‘Šè­¦é…ç½®

#### å‘Šè­¦æ¸ é“

- **Email**: åŸºç¡€å‘Šè­¦é€šçŸ¥
- **Slack**: å®æ—¶å›¢é˜Ÿé€šçŸ¥
- **PagerDuty**: ç´§æ€¥å‘Šè­¦å¤„ç†

#### å‘Šè­¦è§„åˆ™

```javascript
{
  "alert_rules": {
    "high_error_rate": {
      "metric": "error_rate",
      "threshold": 0.05,
      "severity": "critical",
      "duration": "5m",
      "channels": ["email", "slack", "pagerduty"]
    }
  }
}
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### ä»£ç è´¨é‡

#### 1. å¯ç”¨MCPä¼˜åŒ–

```bash
# å§‹ç»ˆå¯ç”¨MCPè·å¾—æœ€ä½³æ€§èƒ½
ENABLE_MCP=1 pnpm run smart-check:all
```

#### 2. ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼

```bash
# é‡è¦åˆ†æ”¯ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼
STRICT_MODE=1 ENABLE_MCP=1 pnpm run smart-check:strict
```

#### 3. å®šæœŸå¥åº·æ£€æŸ¥

```bash
# å®šæœŸæ£€æŸ¥é…ç½®å¥åº·çŠ¶æ€
pnpm run env:health production
pnpm run monitor:health production
```

### Gitå·¥ä½œæµ

#### 1. æ™ºèƒ½æäº¤

```bash
# ä½¿ç”¨æ™ºèƒ½æäº¤æ›¿ä»£æ‰‹åŠ¨æäº¤
pnpm run smart-push
```

#### 2. åˆ†æ”¯ç­–ç•¥

- **main**: ç”Ÿäº§ç¯å¢ƒï¼Œéœ€è¦ä¸¥æ ¼æ£€æŸ¥
- **develop**: å¼€å‘ç¯å¢ƒï¼Œæ ‡å‡†æ£€æŸ¥
- **feature/***: åŠŸèƒ½åˆ†æ”¯ï¼ŒåŸºç¡€æ£€æŸ¥

#### 3. æäº¤è§„èŒƒ

ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç¬¦åˆConventional Commitsè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚

### CI/CDæµç¨‹

#### 1. æ™ºèƒ½CIæ£€æŸ¥

```bash
# ä½¿ç”¨æ™ºèƒ½CIæ›¿ä»£ä¼ ç»ŸCI
pnpm run smart-ci
```

#### 2. åˆ†é˜¶æ®µéƒ¨ç½²

```bash
# å»ºè®®éƒ¨ç½²æµç¨‹
staging â†’ éªŒè¯ â†’ production
```

#### 3. ç›‘æ§é›†æˆ

```bash
# éƒ¨ç½²åç«‹å³æ£€æŸ¥
pnpm run monitor:health production
```

### ç›‘æ§è¿ç»´

#### 1. ä¸»åŠ¨ç›‘æ§

```bash
# å®šæœŸæ£€æµ‹å¼‚å¸¸
pnpm run monitor:detect production 1h
```

#### 2. é…ç½®ç®¡ç†

```bash
# å®šæœŸéªŒè¯é…ç½®
pnpm run env:validate production
```

#### 3. æ€§èƒ½ä¼˜åŒ–

æ ¹æ®MCPåˆ†æç»“æœæŒç»­ä¼˜åŒ–é…ç½®å’Œç­–ç•¥ã€‚

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. MCPå·¥å…·è¿æ¥å¤±è´¥

**ç—‡çŠ¶**: `MCPå·¥å…·è¿æ¥å¤±è´¥` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥MCPå·¥å…·çŠ¶æ€
echo "æ£€æŸ¥MCPè¿æ¥..."

# ç¦ç”¨MCPä½¿ç”¨é™çº§æ¨¡å¼
ENABLE_MCP=0 pnpm run smart-check:all
```

#### 2. é…ç½®éªŒè¯å¤±è´¥

**ç—‡çŠ¶**: `é…ç½®éªŒè¯å¤±è´¥` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
pnpm run env:validate

# é‡æ–°ç”Ÿæˆé…ç½®
pnpm run env:generate production
```

#### 3. ç›‘æ§åˆå§‹åŒ–å¤±è´¥

**ç—‡çŠ¶**: `ç›‘æ§ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥` é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ£€æŸ¥ç¯å¢ƒé…ç½®
pnpm run env:health production

# ä½¿ç”¨åŸºç¡€é…ç½®
pnpm run monitor:init production --basic
```

### è°ƒè¯•æ¨¡å¼

#### å¯ç”¨è¯¦ç»†æ—¥å¿—

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
export DEBUG=1
export VERBOSE=1

# è¿è¡Œå‘½ä»¤
pnpm run smart-check:all
```

#### æ£€æŸ¥ç³»ç»ŸçŠ¶æ€

```bash
# æ£€æŸ¥æ‰€æœ‰ç»„ä»¶çŠ¶æ€
pnpm run env:health
pnpm run monitor:health
pnpm run smart-check:all --dry-run
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–

ç³»ç»Ÿè‡ªåŠ¨æ ¹æ®å˜æ›´ç±»å‹ä¼˜åŒ–å¹¶è¡Œåº¦ã€‚

#### 2. ç¼“å­˜ç­–ç•¥

```bash
# æ¸…ç†ç¼“å­˜
rm -rf .next/cache

# é‡æ–°æ„å»º
pnpm run build
```

#### 3. èµ„æºé™åˆ¶

```bash
# è®¾ç½®å†…å­˜é™åˆ¶
export NODE_OPTIONS="--max-old-space-size=4096"
```

---

## ğŸš€ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„æ£€æŸ¥ç±»å‹

#### 1. æ‰©å±•SmartQualitySession

```javascript
// scripts/lib/smart-quality.mjs
class SmartQualitySession {
  async executeCustomCheck(checkType) {
    // å®ç°è‡ªå®šä¹‰æ£€æŸ¥é€»è¾‘
  }
}
```

#### 2. è°ƒæ•´è´¨é‡é—¨ç¦

- æ›´æ–° `docs/quality-gates.md` ä¸­çš„æ£€æŸ¥è¯´æ˜ï¼Œç¡®ä¿æ–°çš„è‡ªå®šä¹‰æ£€æŸ¥å‡ºç°åœ¨æœ¬åœ°ä¸ CI çš„æµç¨‹æ–‡æ¡£é‡Œã€‚
- å¦‚éœ€ä¸´æ—¶å¼€å…³ï¼Œå¯ç»“åˆç¯å¢ƒå˜é‡æ‰§è¡Œï¼š`CUSTOM_CHECK=1 pnpm push` æˆ– `SKIP_CUSTOM_CHECK=1 pnpm push`ã€‚

### é›†æˆæ–°çš„MCPå·¥å…·

#### 1. åˆ›å»ºæ–°çš„é›†æˆå™¨

```javascript
// scripts/lib/mcp-integrator.mjs
class NewMCPIntegrator {
  async integrateTool(toolName, options) {
    // å®ç°æ–°å·¥å…·é›†æˆ
  }
}
```

#### 2. æ³¨å†Œåˆ°ä¸»ç³»ç»Ÿ

```javascript
// æ³¨å†Œæ–°å·¥å…·
this.mcpIntegrators.push(new NewMCPIntegrator());
```

### è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡

#### 1. æ·»åŠ æŒ‡æ ‡æ”¶é›†å™¨

```javascript
// scripts/lib/smart-monitoring.mjs
class CustomMetricsCollector {
  async collectCustomMetrics() {
    // å®ç°è‡ªå®šä¹‰æŒ‡æ ‡æ”¶é›†
  }
}
```

#### 2. é…ç½®å‘Šè­¦è§„åˆ™

```javascript
// æ·»åŠ è‡ªå®šä¹‰å‘Šè­¦è§„åˆ™
{
  "custom_metric": {
    "threshold": 100,
    "severity": "warning"
  }
}
```

### æ‰©å±•ç¯å¢ƒé…ç½®

#### 1. æ·»åŠ æ–°çš„ç¯å¢ƒ

```bash
# åˆ›å»ºæ–°ç¯å¢ƒé…ç½®
cp config/environments/staging.json config/environments/uat.json
```

#### 2. è‡ªå®šä¹‰ç¯å¢ƒè§„åˆ™

```javascript
// scripts/lib/environment-manager.mjs
getDefaultEnvironmentConfig(environment) {
  if (environment === 'uat') {
    return {
      // UATç¯å¢ƒç‰¹å®šé…ç½®
    };
  }
}
```

---

## ğŸ“š æŠ€æœ¯æ–‡æ¡£

### APIå‚è€ƒ

#### SmartQualitySession

æ™ºèƒ½è´¨é‡æ£€æŸ¥ä¼šè¯ç±»ï¼Œè´Ÿè´£åè°ƒæ•´ä¸ªæ£€æŸ¥æµç¨‹ã€‚

**ä¸»è¦æ–¹æ³•**:
- `initialize()`: åˆå§‹åŒ–æ£€æŸ¥ä¼šè¯
- `analyzeChanges()`: åˆ†ææ–‡ä»¶å˜æ›´
- `executeSmartCheck()`: æ‰§è¡Œæ™ºèƒ½æ£€æŸ¥
- `generateReport()`: ç”Ÿæˆæ£€æŸ¥æŠ¥å‘Š

#### EnvironmentManager

ç¯å¢ƒé…ç½®ç®¡ç†å™¨ï¼Œè´Ÿè´£å¤šç¯å¢ƒé…ç½®ç”Ÿæˆå’Œç®¡ç†ã€‚

**ä¸»è¦æ–¹æ³•**:
- `generateEnvironmentConfig()`: ç”Ÿæˆç¯å¢ƒé…ç½®
- `validateConfig()`: éªŒè¯é…ç½®
- `syncConfig()`: åŒæ­¥é…ç½®
- `healthCheck()`: å¥åº·æ£€æŸ¥

#### SmartMonitoringSystem

æ™ºèƒ½ç›‘æ§ç³»ç»Ÿï¼Œè´Ÿè´£ç›‘æ§é…ç½®å’Œå¼‚å¸¸æ£€æµ‹ã€‚

**ä¸»è¦æ–¹æ³•**:
- `initializeMonitoring()`: åˆå§‹åŒ–ç›‘æ§
- `performHealthCheck()`: æ‰§è¡Œå¥åº·æ£€æŸ¥
- `detectAnomalies()`: æ£€æµ‹å¼‚å¸¸
- `analyzeAnomalies()`: åˆ†æå¼‚å¸¸

### é…ç½®å‚è€ƒ

#### è´¨é‡é—¨ç¦æµç¨‹

- ä½¿ç”¨ `pnpm push` è§¦å‘æœ¬åœ°å…¨é‡æ£€æŸ¥ï¼ˆTypeScriptã€Vitestã€è¦†ç›–ç‡ã€æ–‡æ¡£ã€é“¾æ¥ã€Biomeï¼‰ã€‚
- CI åœ¨ `smart-check` é˜¶æ®µè°ƒç”¨ç›¸åŒè„šæœ¬ï¼Œå¹¶æ ¹æ®åˆ†æ”¯ç­–ç•¥è¿½åŠ æ„å»º/éƒ¨ç½²éªŒè¯ã€‚
- è‹¥éœ€è°ƒæ•´è§„åˆ™ï¼Œå¯ä¿®æ”¹ `docs/quality-gates.md` æˆ–åœ¨å‘½ä»¤å‰è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¦‚ `SKIP_DOCS_CHECK=1 pnpm push`ï¼‰ã€‚

#### ç¯å¢ƒé…ç½®

```javascript
// config/environments/production.json
{
  "database": {
    "host": "${DATABASE_HOST}",
    "ssl_enabled": true
  },
  "security": {
    "encryption_algorithm": "AES-256-GCM"
  }
}
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. å…‹éš†ä»“åº“
2. å®‰è£…ä¾èµ–: `pnpm install`
3. è¿è¡Œæµ‹è¯•: `pnpm test`
4. æäº¤å‰æ£€æŸ¥: `pnpm run smart-check:all`

### ä»£ç è§„èŒƒ

- ä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼
- éµå¾ªConventional Commitsè§„èŒƒ
- ç¼–å†™å®Œæ•´çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### æäº¤æµç¨‹

1. ä½¿ç”¨æ™ºèƒ½æäº¤: `pnpm run smart-push`
2. ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„æäº¤ä¿¡æ¯
3. ç­‰å¾…CIæ£€æŸ¥é€šè¿‡
4. åˆå¹¶åˆ°ä¸»åˆ†æ”¯

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œå·¥å…·çš„æ”¯æŒï¼š

- **MCPå·¥å…·é›†**: context7, memory, sequential-thinking
- **Next.js**: ç°ä»£åŒ–Reactæ¡†æ¶
- **Cloudflare Workers**: è¾¹ç¼˜è®¡ç®—å¹³å°
- **Biome**: ä»£ç è´¨é‡å·¥å…·
- **Vitest**: ç°ä»£åŒ–æµ‹è¯•æ¡†æ¶

---

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥GitHub Issues
3. åˆ›å»ºæ–°çš„Issueå¹¶æä¾›è¯¦ç»†ä¿¡æ¯
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

*æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ä¸­ï¼Œæœ€åæ›´æ–°æ—¶é—´: 2025-10-16*