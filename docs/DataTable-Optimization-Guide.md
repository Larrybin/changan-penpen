# 数据表格优化指南（已归档）

## 当前状态

- 2024 年我们回滚了 Admin 数据表格的抽象层，实现恢复为直接在页面中组合 TanStack Table 列定义与分页状态。
- 对应的实验性模块（`src/hooks/data/`、`src/modules/admin/hooks/`、`src/utils/data-table/` 以及其在 `src/modules/admin/utils/` 中的再导出）已被删除，不再对外提供。
- Admin 面板继续使用稳定的 `DataTable` 组件与 `useList` 查询，行为与线上环境保持一致。

## 为什么归档

原先的抽象尝试希望统一分页、搜索与列工厂逻辑，但在实践中带来了以下问题：

1. **维护成本升高**：额外的 Hook 与列工厂需要持续同步接口与业务特性，导致更新时重复劳动。
2. **类型复杂度增加**：为追求通用化而加入的大量泛型约束，让调试与排障变得困难。
3. **收益不明显**：实际页面数量有限，手写列与分页逻辑即可满足需求，抽象层反而掩盖了真实业务流程。

综合评估后决定停用该方案，并将文档转为历史记录。

## 现行最佳实践

- 在列表页面中直接使用 `useList`（或相应的数据查询函数）搭配本地状态维护分页、搜索条件。
- 根据页面需要手动声明 `ColumnDef`，便于精确控制渲染、格式化与交互。
- 继续复用通用的 `DataTable`、`PageHeader` 等 UI 组件，保持一致的外观与行为。

## 历史资料

该文档保留以记录曾经的优化尝试。如果需要参考旧实现，可查阅 Git 历史（例如 `2024-05` 分支）了解当时的 Hook 与工具函数结构，但请勿在当前代码中重新引入。
