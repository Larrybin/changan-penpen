#!/usr/bin/env sh
# Block pushes when checks fail

# When running via `pnpm push`, heavy checks already ran. Skip to avoid duplication.
if [ "$PNPM_PUSH_RUNNING" = "1" ]; then
  echo "Skipping pre-push checks (handled by pnpm push)."
  exit 0
fi

pnpm run check:all || exit 1

# Block push when unit tests fail (CI-like reporter)
pnpm run test:ci || exit 1

# Semgrep scanning runs in GitHub Actions; local push no longer runs Semgrep.
